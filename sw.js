const CACHE_NAME='audionbeta-v0.18';const FILES_TO_CACHE=['/','/index.html','/entry.html','/404.html','/favicon.ico','/manifest.json','/app/stylesheets/styles.css','/app/stylesheets/fontawesome.css','/app/scripts/main.js','/app/scripts/app.js','/app/scripts/audio.js','/app/scripts/error.js','/app/scripts/jsmediatags.min.js','/app/scripts/lyrics.js','/app/scripts/message.js','/app/scripts/visualizer.js','/app/fonts/inter/Inter-Italic-VariableFont_opsz,wght.ttf','/app/fonts/inter/Inter-VariableFont_opsz,wght.ttf','/app/webfonts/fa-brands-400.woff2','/app/webfonts/fa-regular-400.woff2','/app/webfonts/fa-solid-900.woff2','/app/webfonts/fa-v4compatibility.woff2'];self.addEventListener('install',event=>{event.waitUntil(caches.open(CACHE_NAME).then(cache=>cache.addAll(FILES_TO_CACHE)).catch(err=>console.error('Failed to pre-cache:',err)));self.skipWaiting();});self.addEventListener('activate',event=>{event.waitUntil(caches.keys().then(keys=>Promise.all(keys.map(key=>{if(key!==CACHE_NAME)return caches.delete(key);return Promise.resolve();}))).then(()=>self.clients.claim()));});self.addEventListener('message',event=>{if(!event.data)return;if(event.data.action==='skipWaiting'){self.skipWaiting();}});function isSameOrigin(request){return new URL(request.url).origin===self.location.origin;}self.addEventListener('fetch',event=>{const req=event.request;if(req.method!=='GET')return;if(!isSameOrigin(req))return;if(req.mode==='navigate'){event.respondWith(fetch(req).then(networkResponse=>{const copy=networkResponse.clone();caches.open(CACHE_NAME).then(cache=>cache.put(req,copy));return networkResponse;}).catch(()=>caches.match(req).then(cached=>cached||caches.match('/index.html'))));return;}event.respondWith(caches.match(req).then(cachedResponse=>{const networkFetch=fetch(req).then(networkResponse=>{if(networkResponse&&networkResponse.status===200){caches.open(CACHE_NAME).then(cache=>cache.put(req,networkResponse.clone()));}return networkResponse;}).catch(()=>{return undefined;});return cachedResponse||networkFetch;}));});